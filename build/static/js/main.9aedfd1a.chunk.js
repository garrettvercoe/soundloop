(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,n){e.exports=n(177)},177:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n.n(o),s=(n(29),n(11)),c=n(12),l=n(14),u=n(13),p=n(15),d=n(23),h=n(51),f=n.n(h),b=n(70),m=n(54),g=n(18),y="ADD_LOOP",O="UPDATE_LOOP",j=0;function v(e){return{type:y,id:j++,radius:e,speed:2e4/e}}function E(e){var t=e.shapeProps,n=e.isSelected,a=e.onSelect,o=e.onChange,i=r.a.useRef(),s=r.a.useRef();return r.a.useEffect(function(){n&&(s.current.setNode(i.current),s.current.getLayer().batchDraw())},[n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.Circle,Object.assign({onClick:a,ref:i},t,{x:window.innerWidth/2,y:window.innerHeight/2,fill:"transparent",stroke:"#ed1e79",strokeWidth:1.5,onTransformEnd:function(e){var n=i.current,a=n.scaleX();n.scaleX(1),n.scaleY(1),o(Object(m.a)({},t,{x:n.x(),y:n.y(),radius:n.radius()*a}))}})),n&&r.a.createElement(d.Transformer,{ref:s,enabledAnchors:["top-right","bottom-left"],centeredScaling:!0,rotateEnabled:!1,borderStrokeWidth:0,anchorFill:"#ed1e79",anchorCornerRadius:80,anchorSize:20,anchorStrokeWidth:0,ignoreStroke:!0,boundBoxFunc:function(e,t){return Math.abs(t.width)>Math.min(.8*window.innerHeight,.8*window.innerWidth)?e:Math.abs(t.width)<Math.min(window.innerHeight/5,window.innerWidth/5)?e:t}}))}r.a.Component;function w(){var e=[{radius:Math.min(window.innerWidth*(1/3),window.innerHeight*(1/3)),id:"loop"}],t={width:window.innerWidth*(2/3),height:window.innerHeight*(2/3),id:"loop"},n=r.a.useState(e),a=Object(b.a)(n,2),o=a[0],i=a[1],s=r.a.useState(null),c=Object(b.a)(s,2),l=c[0],u=c[1],p=r.a.useState(t),h=Object(b.a)(p,2);h[0],h[1];return r.a.createElement(d.Layer,null,o.map(function(e,t){return r.a.createElement(E,{key:t,shapeProps:e,isSelected:e.id===l,onSelect:function(){u(e.id)},onChange:function(e){var n=o.slice();n[t]=e,i(n)}})}))}var x=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log("Mounted"),this.props.dispatch(v(2*window.innerHeight/3))}},{key:"render",value:function(){return r.a.createElement(w,{radius:this.props.radius})}}]),t}(r.a.Component),C=(Object(g.b)(function(e){return console.log(e),{radius:e.loops.radius}})(x),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.renderPortal()}},{key:"componentDidUpdate",value:function(e){this.renderPortal()}},{key:"componentWillUnmount",value:function(){i.a.unmountComponentAtNode(this.defaultNode||this.props.node),this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}},{key:"renderPortal",value:function(e){this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode));var t=this.props.children;"function"===typeof t.type&&(t=r.a.cloneElement(t)),i.a.render(t,this.props.node||this.defaultNode)}},{key:"render",value:function(){return null}}]),t}(r.a.Component)),k=n(213),S=n(38),D=n(39),N="TOGGLE_PLAY",L="TOGGLE_STOP";var P={color:"#692d55",position:"relative",paddingLeft:"32.5rem"},M=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.playing?r.a.createElement(S.a,{className:"inl-blk fa-4x",style:P,icon:D.a,onClick:function(){return e.props.dispatch({type:L,playing:!1})}}):r.a.createElement(S.a,{className:"inl-blk fa-4x",style:P,icon:D.b,onClick:function(){return e.props.dispatch({type:N,playing:!0})}}))}}]),t}(r.a.Component);var A=Object(g.b)(function(e){return console.log(e),{playing:e.shared.playing}})(M),T=n(214),W=n(223),R=n(222),F=n(211),H=n(219),_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState({selected:e.target.value,name:e.target.name})},n.state={selected:"Piano"},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{paddingLeft:"5rem"}}," ",r.a.createElement(F.a,null,r.a.createElement(W.a,{htmlFor:"age-simple"},"Instrument"),r.a.createElement(H.a,{value:this.state.selected,onChange:this.handleChange,inputProps:{name:"age",id:"age-simple"}},r.a.createElement(R.a,{value:"Clarinet"},"Clarinet"),r.a.createElement(R.a,{value:"Guitar"},"Guitar"),r.a.createElement(R.a,{value:"Piano"},"Piano"))))}}]),t}(r.a.Component),G=(Object(g.b)()(_),{top:"auto",bottom:0,height:"6rem",boxShadow:"0 20px 10px rgba(0,0,0,1), 2px 6px 6px rgba(0,0,0,1)"}),I={top:"50%",transform:"translateY(-50%)"},B=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,{style:G,position:"fixed",color:"white"},r.a.createElement(T.a,{style:I},r.a.createElement(A,{color:"#692d55"})))}}]),t}(r.a.Component),z=Object(g.b)()(B),U=n(33),q="ADD_TONE",Y="RESIZE_TONE",J="RECEIVE_TONES",V=0;var X="PLAY_TONE",Z=0;function K(e){return{type:X,sound:e,index:Z++}}var Q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isDragging:!1,active:!1},n.getAngle=n.getAngle.bind(Object(U.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getAngle",value:function(){var e=window.innerHeight*(2/3)/2,t=this.props.x-this.props.offset.x,n=this.props.y+this.props.offset.y,a=this.props.x,r=this.props.y+e,o=Math.acos((e*e*2-Math.abs((a-t)*(a-t)+(r-n)*(r-n)))/(e*e*2))*(180/Math.PI);return this.props.offset.x>0?360-o:o}},{key:"componentDidMount",value:function(){var e=this,t=this.props.loops[this.props.attachedLoop].speed,n=this.getAngle(),a=(360-n%360)/t*1e3;this.circle.opacity((this.circle.rotation()+n)%360/1080+.66);var r=360/t*1e3,o=!1;this.anim=new f.a.Animation(function(i){var s=i.timeDiff*t/1e3;e.circle.rotate(s),e.circle.opacity((e.circle.rotation()+n)%360/1080+.66),!o&&a-10<i.time&&i.time<a+10?(e.props.dispatch(K(e.props.sound)),o=!0):o&&i.time%r<a+20&&i.time%r>a?e.props.dispatch(K(e.props.sound)):e.circle.fill(e.props.color)},this.circle.getLayer()),this.props.playing&&this.anim.start()}},{key:"componentDidUpdate",value:function(e){e.playing!==this.props.playing&&(this.props.playing?this.anim.start():this.anim.isRunning()&&this.anim.stop())}},{key:"render",value:function(){var e=this;return r.a.createElement(d.Circle,{x:this.props.x,y:this.props.y,fill:this.props.color,radius:this.props.radius,offset:this.props.offset,ref:function(t){e.circle=t},onDragStart:function(){e.setState({isDragging:!0})},onDragEnd:function(t){e.setState({isDragging:!1,x:t.target.x(),y:t.target.y()})}})}}]),t}(r.a.Component);var $=Object(g.b)(function(e){return console.log(e),{playing:e.shared.playing,loops:e.loops}})(Q),ee=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(d.Layer,null,this.props.tones.map(function(e){return r.a.createElement($,{color:e.color,x:e.position.x,y:e.position.y,offset:e.offset,radius:e.radius,attachedLoop:e.attachedLoop,sound:e.sound})}))}}]),t}(r.a.Component);var te=Object(g.b)(function(e){return console.log(e),{tones:e.tones}})(ee),ne=n(53);function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return[].concat(Object(ne.a)(e),[t.sound]);default:return e}}var re=n(37),oe=Object(re.c)({loops:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return[].concat(Object(ne.a)(e),[{id:t.id,radius:t.radius,speed:t.speed}]);case O:return Object(m.a)({},e);default:return e}},tones:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return[].concat(Object(ne.a)(e),[{id:t.id,color:t.color,attachedLoop:t.attachedLoop,radius:t.radius,sound:t.sound,position:t.position,offset:t.offset}]);case Y:return{state:e};case J:return Object(m.a)({},e,t.tones);default:return e}},cord:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object.assign({},e,{index:t.index,sounds:ae(e.sounds,t)})},shared:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{playing:!1,center:{x:window.innerWidth/2,y:window.innerHeight/2}};switch((arguments.length>1?arguments[1]:void 0).type){case N:return Object.assign({},e,{playing:!0});case L:return Object.assign({},e,{playing:!1});default:return e}}}),ie=function(e){return function(t){return function(n){console.group(n.type),console.log("The action: ",n);var a=t(n);return console.log("The new state is: ",e.getState()),console.groupEnd(),a}}},se=n(100),ce=Object(re.a)(se.a,ie),le=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isDragging:!1,active:!1},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(d.Circle,{x:window.innerWidth/2,y:window.innerHeight/2,radius:this.props.radius,fill:"transparent",stroke:"#ed1e79",strokeWidth:1.5})}}]),t}(r.a.Component),ue=Object(g.b)()(le),pe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(v(window.innerHeight/3))}},{key:"render",value:function(){return r.a.createElement(d.Layer,null,this.props.loops.map(function(e){return r.a.createElement(ue,{radius:e.radius})}))}}]),t}(r.a.Component);var de=Object(g.b)(function(e){return console.log(e),{loops:e.loops}})(pe),he={padding:"1rem 0  0 2rem"},fe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){var e=n.props.loops;n.props.dispatch(v(e[e.length-1].radius/2))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tone-add",style:{position:"absolute",top:"57%",left:"5%",width:"15rem",height:"5rem",backgroundColor:"#fff",borderRadius:"1%",boxShadow:"0 20px 10px rgba(0,0,0,0.01), 0 6px 6px rgba(0,0,0,0.05)"},onClick:this.handleClick},r.a.createElement("div",{style:he},r.a.createElement("h3",{className:"light inl-blk"},"ADD LOOP"),r.a.createElement(S.a,{className:"plus-icon inl-blk fa-lg",icon:D.c}))))}}]),t}(r.a.Component);var be=Object(g.b)(function(e){return console.log(e),{loops:e.loops}})(fe),me=n(101),ge=n.n(me),ye=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.synth=(new ge.a.PolySynth).toMaster(),this.tween=new f.a.Tween({node:this.line,points:[this.props.center.x,this.props.center.y,this.props.center.x+5,this.props.center.y-50,this.props.center.x-8,this.props.center.y-100,this.props.center.x+10,this.props.center.y-150,this.props.center.x-12,this.props.center.y-200,this.props.center.x+12,this.props.center.y-250,this.props.center.x-10,this.props.center.y-300,this.props.center.x+5,this.props.center.y-350,this.props.center.x,this.props.center.y-400],onFinish:function(){this.tween.reverse()}}),this.props.playing&&this.tween.play()}},{key:"playTween",value:function(){}},{key:"componentDidUpdate",value:function(e){e.sounds!==this.props.sounds&&(this.synth.triggerAttackRelease(this.props.sounds[this.props.index],"4n"),this.tween.play())}},{key:"render",value:function(){var e=this;return r.a.createElement(d.Layer,null,r.a.createElement(d.Circle,{x:this.props.center.x,y:this.props.center.y-400,radius:6,fill:"#692D55"}),r.a.createElement(d.Circle,{x:this.props.center.x,y:this.props.center.y,radius:11,fill:"#692D55"}),r.a.createElement(d.Line,{points:[this.props.center.x,this.props.center.y,this.props.center.x-5,this.props.center.y-50,this.props.center.x+8,this.props.center.y-100,this.props.center.x-10,this.props.center.y-150,this.props.center.x+12,this.props.center.y-200,this.props.center.x-12,this.props.center.y-250,this.props.center.x+10,this.props.center.y-300,this.props.center.x-5,this.props.center.y-350,this.props.center.x,this.props.center.y-400],stroke:"#692D55",strokeWidth:3,tension:.5,ref:function(t){e.line=t}}))}}]),t}(r.a.Component);var Oe=Object(g.b)(function(e){return{center:e.shared.center,playing:e.shared.playing,sounds:e.cord.sounds,index:e.cord.index}})(ye),je=n(221),ve=n(215),Ee=n(102),we=n.n(Ee),xe=n(218),Ce=n(5),ke=n(224),Se=n(216),De=n(217),Ne=Object(Ce.a)(function(e){return{root:{margin:0,padding:"4rem"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})(function(e){var t=e.children,n=e.classes,a=e.onClose;return r.a.createElement(ke.a,{disableTypography:!0,className:n.root},r.a.createElement("h2",null,t),a?r.a.createElement(ve.a,{"aria-label":"Close",className:n.closeButton,onClick:a},r.a.createElement(we.a,null)):null)}),Le=Object(Ce.a)(function(e){return{root:{padding:"4rem"}}})(Se.a),Pe=Object(Ce.a)(function(e){return{root:{margin:0,padding:"4rem"}}})(De.a),Me=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleClickOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{className:"plus-icon inl-blk fa-lg",icon:D.c,onClick:this.handleClickOpen}),r.a.createElement(je.a,{fullWidth:!0,maxWidth:"md",onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:this.state.open},r.a.createElement(Ne,{id:"customized-dialog-title",onClose:this.handleClose},"Add a New Tone"),r.a.createElement(Le,null,"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla."),r.a.createElement(Pe,null,r.a.createElement(xe.a,{onClick:this.handleClose,color:"primary"},"Add Tones"))))}}]),t}(r.a.Component),Ae=n(103),Te=n.n(Ae),We=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).selector=r.a.createRef(),n.state={deltaPosition:{x:0,y:0}},n.handleStop=n.handleStop.bind(Object(U.a)(n)),n.snap=n.snap.bind(Object(U.a)(n)),n.findSnapCoordinates=n.findSnapCoordinates.bind(Object(U.a)(n)),n.findClosestLoop=n.findClosestLoop.bind(Object(U.a)(n)),n.handleClick=n.handleClick.bind(Object(U.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"findClosestLoop",value:function(e){for(var t=this.props.loops,n=0,a=t[n].radius,r=Math.abs(e-a),o=0;o<t.length;o++){var i=Math.abs(e-t[o].radius);i<r&&(r=i,a=t[o].radius,n=o)}return r<50?{index:n,value:a}:null}},{key:"findSnapCoordinates",value:function(e,t,n,a,r){var o=Math.atan2(t,e);return{x:n-Math.cos(o)*r,y:a+Math.sin(o)*r}}},{key:"snap",value:function(e,t){var n,a,r,o,i,s,c,l,u=window.innerWidth/2,p=window.innerHeight/2,d=t-p,h=e-u,f=Math.sqrt(d*d+h*h),b=this.findClosestLoop(f);if(b){var m=this.findSnapCoordinates(d,h,u,p,b.value),g=-1*(m.y-p),y=m.x-u;this.props.dispatch((n=u,a=p,r=this.props.color,o=g,i=y,s=b.index,c=20,l=this.props.sound,{type:q,id:V++,position:{x:n,y:a},offset:{x:o,y:i},color:r,attachedLoop:s,radius:c,sound:l}))}}},{key:"handleStop",value:function(){this.rect=this.selector.current.getBoundingClientRect();var e=this.rect.left,t=this.rect.top;this.snap(e,t),this.setState({deltaPosition:{x:0,y:0}})}},{key:"handleClick",value:function(){this.props.dispatch(K(this.props.sound))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"hover-shadow",style:{borderRadius:"100%",border:"2px solid",borderColor:this.props.color,backgroundColor:"transparent",width:"2rem",height:"2rem",position:"absolute",outline:"none",pointerEvents:"none"}}),r.a.createElement(Te.a,{position:this.state.deltaPosition,onStop:this.handleStop},r.a.createElement("button",{ref:this.selector,className:"hover-shadow",onClick:this.handleClick,style:{borderRadius:"100%",backgroundColor:this.props.color,width:"2rem",zIndex:1,height:"2rem",border:"none",outline:"none"}})))}}]),t}(r.a.Component);var Re=Object(g.b)(function(e){return console.log(e),{loops:e.loops}})(We),Fe={textAlign:"left",margin:0,zIndex:1,padding:0,position:"relative"},He={display:"inline-block",verticalAlign:"top",padding:".25rem"},_e={position:"absolute",top:"30%",left:"5%",width:"15rem",height:"14rem",backgroundColor:"#fff",borderRadius:"1%",boxShadow:"0 20px 10px rgba(0,0,0,0.01), 0 6px 6px rgba(0,0,0,0.05)"},Ge=[{color:"#fe6b12",sound:"E4"},{color:"#fec52b",sound:"G4"},{color:"#029e4e",sound:"B4"},{color:"#e11a79",sound:"D4"},{color:"#6581c9",sound:"F4"},{color:"#7f47dd",sound:"C4"}],Ie={padding:"2rem"},Be=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{style:Fe},this.props.colors.map(function(e){return r.a.createElement("li",{style:He,key:e.color},r.a.createElement(Re,{color:e.color,sound:e.sound}))}))}}]),t}(r.a.Component),ze=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:_e},r.a.createElement("div",{style:Ie},r.a.createElement("h3",{className:"light inl-blk"}," TONES"),r.a.createElement(Me,null),r.a.createElement(Be,{colors:Ge})))}}]),t}(r.a.Component),Ue=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,null),r.a.createElement(be,null))}}]),t}(r.a.Component),qe=Object(g.b)()(Ue),Ye=Object(re.d)(oe,ce),Je=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.Stage,{width:window.innerWidth,height:window.innerHeight},r.a.createElement(g.a,{store:Ye},r.a.createElement(de,null),r.a.createElement(Oe,null),r.a.createElement(te,null)),r.a.createElement(C,null,r.a.createElement(g.a,{store:Ye},r.a.createElement(qe,null),r.a.createElement(z,null)))))}}]),t}(a.Component);i.a.render(r.a.createElement(Je,null),document.getElementById("root"))},29:function(e,t,n){}},[[112,1,2]]]);
//# sourceMappingURL=main.9aedfd1a.chunk.js.map